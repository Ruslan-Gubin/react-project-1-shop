"use strict";(self.webpackChunkreact_webpack=self.webpackChunkreact_webpack||[]).push([[282],{4282:function(e,a,l){l.r(a),l.d(a,{default:function(){return x}});var s=l(7294),i=l(7536),t=l(9250),n=l(6706),r=l(5418),c=l(3939),u=l(2804),d=l(4042),m=l(7061),o="wgkJboU25H8e7n6fU625",h="W6960tnmkM6WluYCHv0h",g="VYG0GNRJYZQnPxB3Gitf",p=l(3963),f=l(5893);const x=()=>{var e,a,l;const{auth:x}=(0,n.useSelector)(c.Hz),{data:v}=r.iJ.useGetEmailsQuery(null),[j,{}]=r.iJ.useCreateAuthMutation(),[N,{}]=r.iJ.useUpdateAuthMutation(),[k,{}]=r.iJ.useDeleteAuthMutation(),[b,w]=s.useState(!1),[y,A]=s.useState(""),[C,S]=s.useState(!1),{fileRef:J,changeFile:M,imag:z,cancelImage:R,setImageAuth:V}=(0,p.dX)(),_=(0,n.useDispatch)(),F=(0,t.s0)(),{register:I,formState:{errors:Q,isValid:Z},handleSubmit:q,reset:D}=(0,i.cI)({mode:"onChange",defaultValues:{fullName:x.fullName?x.fullName:"",email:x.email?x.email:"",password:""}});return s.useEffect((()=>{x.image&&V(x.image.url)}),[]),(0,f.jsxs)("div",{className:"C4x6Bzm7d33gS7m486YA",children:[(0,f.jsx)("h2",{className:"roVkajVTvu7dXqrBZ8D1",children:"Создание аккаунта"}),z?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("img",{onClick:()=>R(),src:z,alt:"image user",className:o,style:{borderRadius:50}})}):(0,f.jsx)("img",{onClick:()=>{var e;return null===(e=J.current)||void 0===e?void 0:e.click()},className:o,src:d.ci.userRegistedPng,alt:"userRegistedPng"}),(0,f.jsx)("input",{ref:J,type:"file",onChange:M,hidden:!0}),(0,f.jsxs)("form",{onSubmit:q((async e=>{const a=null==v?void 0:v.find((a=>a===e.email));if(A(a?`${a}  уже занят`:""),!x.image||a&&!x.email)x.image||a||!z||(w(!0),await j({...e,imag:z}).then((e=>{const a=e.data;_(c.vA.addAuth(a))})).then((()=>{D(),F("/post")})).catch((e=>console.log("Не удалось зарегестрироватся",e.message))).finally((()=>{w(!1)})));else{const a=x._id,l=x.image.url;w(!0),await N({...e,prevImage:l,imag:z,id:a}).then((e=>{e.data.success&&F("/post")})).catch((e=>console.log("Не удалось поменять данные",e.message))).finally((()=>{w(!1)}))}})),children:[(0,f.jsx)("input",{className:h,placeholder:"fullName",type:"text",...I("fullName",{required:"Поле ввода не должно буть пустым",minLength:{value:3,message:"Минимум 3 символова"}})}),null!=Q&&Q.fullName?(0,f.jsx)("p",{className:g,children:null==Q||null===(e=Q.fullName)||void 0===e?void 0:e.message}):(0,f.jsx)("p",{}),(0,f.jsx)("input",{className:h,placeholder:"email",type:"email",...I("email",{required:"Поле ввода не должно буть пустым",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9-]+.+.[A-Z]{2,4}$/i,message:"Не  правильный E-Mail"}})}),null!=Q&&Q.email?(0,f.jsx)("p",{className:g,children:null==Q||null===(a=Q.email)||void 0===a?void 0:a.message}):(0,f.jsx)("p",{style:{color:"red"},children:y}),(0,f.jsx)("input",{className:h,placeholder:"password",type:"password",...I("password",{required:"Поле ввода не должно буть пустым",pattern:{value:/^(?=.*[0-9].*[0-9])(?=.*[a-z].*[a-z].*[a-z]).{6,}$/,message:"Пароль из 8-ми английских символов и обязательно цифра"}})}),null!=Q&&Q.password?(0,f.jsx)("p",{className:g,children:null==Q||null===(l=Q.password)||void 0===l?void 0:l.message}):(0,f.jsx)("p",{}),(0,f.jsx)("div",{className:"hSiF5FWQJpxkitxMkIR8",children:z?(0,f.jsx)(u.K1,{type:"submit",disabled:b,bgColor:Z?"primary":"black",children:"Подтвердить"}):(0,f.jsx)(u.K1,{bgColor:"black",children:"Обязательно добавте фото"})})]}),(0,f.jsx)("div",{className:"Q9bz5l2yDHiQMF5V0c97",children:x.email&&(0,f.jsx)(u.K1,{bgColor:"red",onClick:()=>S(!0),children:"Удалить"})}),(0,f.jsx)(m.u_,{active:C,setActive:S,children:(0,f.jsx)(m.x8,{text:`Вы действительно хотите удалить ${x.fullName}?`,confirm:()=>(async()=>{if(x){const e=null==x?void 0:x._id;await k(e),_(c.vA.resetAuth()),R(),S(!1)}})(),cancel:()=>S(!1)})})]})}}}]);