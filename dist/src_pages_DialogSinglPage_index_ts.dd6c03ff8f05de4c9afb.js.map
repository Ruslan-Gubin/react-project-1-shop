{"version":3,"file":"src_pages_DialogSinglPage_index_ts.dd6c03ff8f05de4c9afb.js","mappings":"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","sources":["webpack://react-webpack/./src/pages/DialogSinglPage/DialogSinglPage.tsx","webpack://react-webpack/./src/pages/DialogSinglPage/index.ts","webpack://react-webpack/./src/pages/DialogSinglPage/DialogSinglPage.module.scss","webpack://react-webpack/./src/pages/DialogSinglPage/DialogSinglPage.module.scss?756d"],"sourcesContent":["import React from 'react';\r\nimport { useLocation, useNavigate, useParams } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { authApi, dialogApi } from 'store/rtkQuery';\r\nimport { selectAuth } from 'store/slice';\r\nimport { Comments } from 'components';\r\nimport { ButtonMain } from 'ui';\r\n\r\nimport styles from './DialogSinglPage.module.scss';\r\n\r\nconst FDialogSinglPage = () => {\r\nconst {id} = useParams()\r\nconst {data: dialogData, isLoading} = dialogApi.useGetOneDialogQuery({id}, {\r\n  pollingInterval: 10000\r\n})\r\nconst { auth } = useSelector(selectAuth);\r\nconst {data: authData,isLoading: isLoadAuth} = authApi.useGetUserSinglPageQuery(auth._id, {\r\n  pollingInterval: 10000\r\n})\r\nconst [addDialogComment, {}] = dialogApi.useAddCommentUpdateMutation()\r\nconst [removeDialogComment, {}] = dialogApi.useRemoveCommentUpdateMutation()\r\nconst [deleteDialog, {}] = dialogApi.useDeleteDialogMutation()\r\nconst navigate = useNavigate()\r\nconst {pathname} = useLocation()\r\nconst path = pathname.match(/\\w+/i)\r\nconst categoryName = path && path[0]\r\n\r\nReact.useEffect(() => {\r\n  if (authData && !isLoadAuth && id && !authData.dialogs.includes(id)) {\r\n    navigate('/post')\r\n  }\r\n},[authData])\r\n\r\nconst handlerDeleteDialog = async () => {\r\n  if (dialogData && !isLoading && id) {  \r\n    const params = {\r\n      dialogId: id,\r\n      userOneId: dialogData.userOne._id,\r\n      userTwoId: dialogData.userTwo._id,\r\n      commentArr: dialogData.comments\r\n    }\r\n    await deleteDialog(params)\r\n    .unwrap()\r\n    .then(() => {\r\n      navigate('/post') \r\n    })\r\n    .catch(error => console.log(error))\r\n  }\r\n}\r\n\r\n  return (\r\n    <div className={styles.root}>\r\n    {id && categoryName && dialogData && !isLoading && <Comments target={{_id: id, category: categoryName}} removeCommentTarget={removeDialogComment} addComment={addDialogComment} arrComments={dialogData.comments}/>}\r\n    <ButtonMain onClick={() => handlerDeleteDialog()} bgColor='red'>Удалить диалог</ButtonMain>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const DialogSinglPage =  React.memo(FDialogSinglPage);","export {DialogSinglPage as default} from './DialogSinglPage';","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {};\nexport default ___CSS_LOADER_EXPORT___;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/sass-loader/dist/cjs.js!./DialogSinglPage.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/sass-loader/dist/cjs.js!./DialogSinglPage.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n"],"names":["React","useLocation","useNavigate","useParams","useSelector","authApi","dialogApi","selectAuth","Comments","ButtonMain","styles","FDialogSinglPage","id","data","dialogData","isLoading","useGetOneDialogQuery","pollingInterval","auth","authData","isLoadAuth","useGetUserSinglPageQuery","_id","addDialogComment","useAddCommentUpdateMutation","removeDialogComment","useRemoveCommentUpdateMutation","deleteDialog","useDeleteDialogMutation","navigate","pathname","path","match","categoryName","useEffect","dialogs","includes","handlerDeleteDialog","params","dialogId","userOneId","userOne","userTwoId","userTwo","commentArr","comments","unwrap","then","catch","error","console","log","root","category","DialogSinglPage","memo","default"],"sourceRoot":""}