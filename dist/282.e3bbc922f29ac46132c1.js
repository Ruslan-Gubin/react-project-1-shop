"use strict";(self.webpackChunkreact_webpack=self.webpackChunkreact_webpack||[]).push([[282],{4282:function(e,a,l){l.r(a),l.d(a,{default:function(){return f}});var s=l(7294),i=l(7536),t=l(9250),n=l(6706),r=l(4801),c=l(9151),u=l(4388),d=l(7204),o=l(6752),m="wgkJboU25H8e7n6fU625",h="W6960tnmkM6WluYCHv0h",g="VYG0GNRJYZQnPxB3Gitf",p=l(5893);const f=()=>{var e,a,l;const{auth:f}=(0,n.useSelector)(c.Hz),{data:x}=r.iJ.useGetEmailsQuery(null),[v,{}]=r.iJ.useCreateAuthMutation(),[j,{}]=r.iJ.useUpdateAuthMutation(),[N,{}]=r.iJ.useDeleteAuthMutation(),[k,b]=s.useState(""),[w,y]=s.useState(!1),[A,C]=s.useState(""),[S,R]=s.useState(!1),J=(0,n.useDispatch)(),M=(0,t.s0)(),{register:z,formState:{errors:V,isValid:_},handleSubmit:D,reset:F}=(0,i.cI)({mode:"onChange",defaultValues:{fullName:f.fullName?f.fullName:"",email:f.email?f.email:"",password:""}}),Q=s.useRef(null);return s.useEffect((()=>{f.image&&b(f.image.url)}),[]),(0,p.jsxs)("div",{className:"C4x6Bzm7d33gS7m486YA",children:[(0,p.jsx)("h2",{className:"roVkajVTvu7dXqrBZ8D1",children:"Создание аккаунта"}),k?(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("img",{onClick:()=>b(""),src:k,alt:"image user",className:m,style:{borderRadius:50}})}):(0,p.jsx)("img",{onClick:()=>{var e;return null===(e=Q.current)||void 0===e?void 0:e.click()},className:m,src:d.ci.userRegistedPng,alt:"userRegistedPng"}),(0,p.jsx)("input",{ref:Q,type:"file",onChange:e=>{const a=e.target.files&&e.target.files[0];a&&(e=>{try{const a=new FileReader;a.readAsDataURL(e),a.onloadend=()=>{a.result&&b(a.result)}}catch(e){console.log(e,"Ошибка при загрузке файла!")}})(a)},hidden:!0}),(0,p.jsxs)("form",{onSubmit:D((async e=>{const a=null==x?void 0:x.find((a=>a===e.email));if(C(a?`${a}  уже занят`:""),!f.image||a&&!f.email)f.image||a||!k||(y(!0),await v({...e,image:k}).then((e=>{const a=e.data;J(c.vA.addAuth(a))})).then((()=>{F(),M("/post")})).catch((e=>console.log("Не удалось зарегестрироватся",e.message))).finally((()=>{y(!1)})));else{const a=f._id,l=f.image.url;y(!0),await j({...e,prevImage:l,image:k,id:a}).then((e=>{e.data.success&&M("/post")})).catch((e=>console.log("Не удалось поменять данные",e.message))).finally((()=>{y(!1)}))}})),children:[(0,p.jsx)("input",{className:h,placeholder:"fullName",type:"text",...z("fullName",{required:"Поле ввода не должно буть пустым",minLength:{value:3,message:"Минимум 3 символова"}})}),null!=V&&V.fullName?(0,p.jsx)("p",{className:g,children:null==V||null===(e=V.fullName)||void 0===e?void 0:e.message}):(0,p.jsx)("p",{}),(0,p.jsx)("input",{className:h,placeholder:"email",type:"email",...z("email",{required:"Поле ввода не должно буть пустым",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9-]+.+.[A-Z]{2,4}$/i,message:"Не  правильный E-Mail"}})}),null!=V&&V.email?(0,p.jsx)("p",{className:g,children:null==V||null===(a=V.email)||void 0===a?void 0:a.message}):(0,p.jsx)("p",{style:{color:"red"},children:A}),(0,p.jsx)("input",{className:h,placeholder:"password",type:"password",...z("password",{required:"Поле ввода не должно буть пустым",pattern:{value:/^(?=.*[0-9].*[0-9])(?=.*[a-z].*[a-z].*[a-z]).{6,}$/,message:"Пароль из 8-ми английских символов и обязательно цифра"}})}),null!=V&&V.password?(0,p.jsx)("p",{className:g,children:null==V||null===(l=V.password)||void 0===l?void 0:l.message}):(0,p.jsx)("p",{}),(0,p.jsx)("div",{className:"hSiF5FWQJpxkitxMkIR8",children:k?(0,p.jsx)(u.K1,{disabled:w,bgColor:_?"primary":"black",children:"Подтвердить"}):(0,p.jsx)(u.K1,{bgColor:"black",children:"Обязательно добавте фото"})})]}),(0,p.jsx)("div",{className:"Q9bz5l2yDHiQMF5V0c97",children:f.email&&(0,p.jsx)(u.K1,{bgColor:"red",onClick:()=>R(!0),children:"Удалить"})}),(0,p.jsx)(o.u_,{active:S,setActive:R,children:(0,p.jsx)(o.x8,{text:`Вы действительно хотите удалить ${f.fullName}?`,confirm:()=>(async()=>{if(f){const e=null==f?void 0:f._id;await N(e),J(c.vA.resetAuth()),b(""),R(!1)}})(),cancel:()=>R(!1)})})]})}}}]);